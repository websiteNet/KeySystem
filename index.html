PCFET0NUWVBFIGh0bWw+CjxodG1sIGxhbmc9InB0LWJyIj4KPGhlYWQ+CiAgICA8bWV0YSBjaGFyc2V0PSJVVEYtOCI+CiAgICA8bWV0YSBuYW1lPSJ2aWV3cG9ydCIgY29udGVudD0id2lkdGg9ZGV2aWNlLXdpZHRoLCBpbml0aWFsLXNjYWxlPTEuMCI+CiAgICA8dGl0bGU+UmVkaXJlY2lvbmFtZW50byBMaW5rdmVydGlzZTwvdGl0bGU+CiAgICA8c3R5bGU+CiAgICAgICAgYm9keSB7CiAgICAgICAgICAgIGZvbnQtZmFtaWx5OiBBcmlhbCwgc2Fucy1zZXJpZjsKICAgICAgICAgICAgdGV4dC1hbGlnbjogY2VudGVyOwogICAgICAgICAgICBtYXJnaW46IDA7CiAgICAgICAgICAgIHBhZGRpbmc6IDIwcHg7CiAgICAgICAgfQoKICAgICAgICBoMiB7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS41ZW07CiAgICAgICAgfQoKICAgICAgICBhIHsKICAgICAgICAgICAgZGlzcGxheTogaW5saW5lLWJsb2NrOwogICAgICAgICAgICBwYWRkaW5nOiAxNXB4IDMwcHg7CiAgICAgICAgICAgIGJhY2tncm91bmQtY29sb3I6ICM0Q0FGNTA7CiAgICAgICAgICAgIGNvbG9yOiB3aGl0ZTsKICAgICAgICAgICAgdGV4dC1kZWNvcmF0aW9uOiBub25lOwogICAgICAgICAgICBib3JkZXItcmFkaXVzOiA1cHg7CiAgICAgICAgICAgIG1hcmdpbi10b3A6IDIwcHg7CiAgICAgICAgICAgIGZvbnQtc2l6ZTogMS4yZW07CiAgICAgICAgfQoKICAgICAgICBhOmhvdmVyIHsKICAgICAgICAgICAgYmFja2dyb3VuZC1jb2xvcjogIzQ1YTA0OTsKICAgICAgICB9CgogICAgICAgICNyZXN1bHQgewogICAgICAgICAgICBtYXJnaW4tdG9wOiAyMHB4OwogICAgICAgICAgICBmb250LXNpemU6IDEuMmVtOwogICAgICAgICAgICBjb2xvcjogIzMzMzsKICAgICAgICB9CgogICAgICAgIC8qIEFqdXN0ZSBwYXJhIHRlbGFzIHBlcXVlbmFzIChjZWx1bGFyIGUgdGFibGV0KSAqLwogICAgICAgIEBtZWRpYSAobWF4LXdpZHRoOiA2MDBweCkgewogICAgICAgICAgICBoMiB7CiAgICAgICAgICAgICAgICBmb250LXNpemU6IDEuMmVtOwogICAgICAgICAgICB9CgogICAgICAgICAgICBhIHsKICAgICAgICAgICAgICAgIGZvbnQtc2l6ZTogMWVtOwogICAgICAgICAgICAgICAgcGFkZGluZzogMTJweCAyMHB4OwogICAgICAgICAgICB9CiAgICAgICAgfQogICAgPC9zdHlsZT4KPC9oZWFkPgo8Ym9keT4KCiAgICA8aDI+Q2xpcXVlIGFiYWl4byBwYXJhIGFjZXNzYXIgc2V1IGNvbnRl+mRvOjwvaDI+CiAgICA8YSBpZD0ibXlMaW5rIiBocmVmPSIjIj5EZXNjcmlwdG9ncmFmYXIgZSBBY2Vzc2FyPC9hPgogICAgPHAgaWQ9InJlc3VsdCI+PC9wPgoKICAgIDxzY3JpcHQ+CiAgICAgICAgLy8gRnVu5+NvIHBhcmEgZGVzY3JpcHRvZ3JhZmFyIGEgY2hhdmUgcmVjZWJpZGEKICAgICAgICBmdW5jdGlvbiB4b3JFbmNyeXB0RGVjcnlwdChpbnB1dCwga2V5KSB7CiAgICAgICAgICAgIGxldCBvdXRwdXQgPSAnJzsKICAgICAgICAgICAgZm9yIChsZXQgaSA9IDA7IGkgPCBpbnB1dC5sZW5ndGg7IGkrKykgewogICAgICAgICAgICAgICAgbGV0IGlucHV0Q2hhciA9IGlucHV0LmNoYXJDb2RlQXQoaSk7CiAgICAgICAgICAgICAgICBsZXQga2V5Q2hhciA9IGtleS5jaGFyQ29kZUF0KGkgJSBrZXkubGVuZ3RoKTsKICAgICAgICAgICAgICAgIG91dHB1dCArPSBTdHJpbmcuZnJvbUNoYXJDb2RlKGlucHV0Q2hhciBeIGtleUNoYXIpOwogICAgICAgICAgICB9CiAgICAgICAgICAgIHJldHVybiBvdXRwdXQ7CiAgICAgICAgfQoKICAgICAgICAvLyBGdW7n428gcGFyYSBvYnRlciBvcyBwYXLibWV0cm9zIGRhIFVSTAogICAgICAgIGZ1bmN0aW9uIGdldFVybFBhcmFtcygpIHsKICAgICAgICAgICAgY29uc3QgdXJsUGFyYW1zID0gbmV3IFVSTFNlYXJjaFBhcmFtcyh3aW5kb3cubG9jYXRpb24uc2VhcmNoKTsKICAgICAgICAgICAgY29uc3QgcGxheWVySWQgPSB1cmxQYXJhbXMuZ2V0KCdpZCcpOyAvLyBPYnTpbSBvIElEIGRvIGpvZ2Fkb3IKICAgICAgICAgICAgY29uc3QgZW5jcnlwdGVkS2V5ID0gdXJsUGFyYW1zLmdldCgna2V5Jyk7IC8vIE9idOltIGEgY2hhdmUgY3JpcHRvZ3JhZmFkYQogICAgICAgICAgICByZXR1cm4geyBwbGF5ZXJJZCwgZW5jcnlwdGVkS2V5IH07CiAgICAgICAgfQoKICAgICAgICAvLyBGdW7n428gcGFyYSBkZXNjcmlwdG9ncmFmYXIgYSBjaGF2ZSBlIGV4aWJpciBvIHJlc3VsdGFkbwogICAgICAgIGZ1bmN0aW9uIGRlY3J5cHRLZXkoKSB7CiAgICAgICAgICAgIGNvbnN0IHsgcGxheWVySWQsIGVuY3J5cHRlZEtleSB9ID0gZ2V0VXJsUGFyYW1zKCk7CiAgICAgICAgICAgIGNvbnN0IHJlc3VsdEVsZW1lbnQgPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZCgicmVzdWx0Iik7CgogICAgICAgICAgICBpZiAoIXBsYXllcklkIHx8ICFlbmNyeXB0ZWRLZXkpIHsKICAgICAgICAgICAgICAgIHJlc3VsdEVsZW1lbnQuaW5uZXJUZXh0ID0gIkVycm86IERhZG9zIGluduFsaWRvcy4iOwogICAgICAgICAgICAgICAgcmV0dXJuOwogICAgICAgICAgICB9CgogICAgICAgICAgICAvLyBDaGF2ZSBkZSBjcmlwdG9ncmFmaWEgKG1lc21hIHVzYWRhIG5vIFJvYmxveCkKICAgICAgICAgICAgY29uc3QgZW5jcnlwdGlvbktleSA9ICI0MWtZeU4iICsgcGxheWVySWQgKyAiYjRZOFdsRkVNWXJEVzB6eW5kYSI7CgogICAgICAgICAgICAvLyBEZXNjcmlwdG9ncmFmYSBhIGNoYXZlCiAgICAgICAgICAgIGNvbnN0IGRlY3J5cHRlZEtleSA9IHhvckVuY3J5cHREZWNyeXB0KGVuY3J5cHRlZEtleSwgZW5jcnlwdGlvbktleSk7CgogICAgICAgICAgICAvLyBFeGliZSBhIGNoYXZlIGRlc2NyaXB0b2dyYWZhZGEKICAgICAgICAgICAgcmVzdWx0RWxlbWVudC5pbm5lclRleHQgPSAiQ2hhdmUgRGVzY3JpcHRvZ3JhZmFkYTogIiArIGRlY3J5cHRlZEtleTsKICAgICAgICB9CgogICAgICAgIC8vIEFkaWNpb25hIGV2ZW50byBhbyBib3TjbwogICAgICAgIGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKCJteUxpbmsiKS5hZGRFdmVudExpc3RlbmVyKCJjbGljayIsIGZ1bmN0aW9uIChldmVudCkgewogICAgICAgICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpOyAvLyBJbXBlZGUgbyByZWRpcmVjaW9uYW1lbnRvCiAgICAgICAgICAgIGRlY3J5cHRLZXkoKTsgLy8gRXhlY3V0YSBhIGZ1bufjbyBkZSBkZXNjcmlwdG9ncmFmYXIKICAgICAgICB9KTsKICAgIDwvc2NyaXB0PgoKPC9ib2R5Pgo8L2h0bWw+
